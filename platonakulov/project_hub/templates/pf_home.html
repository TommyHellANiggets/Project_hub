{% extends 'pf_base.html' %}
{% load static %}

{% block title %}
    Главная - Power Fuel
{% endblock %}

{% block profile_link %}
    {% if user.is_authenticated %}
        Профиль
    {% else %}
        Войти
    {% endif %}
{% endblock %}

{% block profile_dropdown %}
    {% if user.is_authenticated %}
        <li><a class="dropdown-item" href="{% url 'pf-profile' %}">Личный кабинет</a></li>
        <div class="dropdown-divider"></div> 
        <li><a class="dropdown-item" href="{% url 'pf-cart' %}">Корзина</a></li>
    {% else %}
        <li><a class="dropdown-item" href="{% url 'pf-authorisation' %}">Войти</a></li>
        <li><a class="dropdown-item" href="{% url 'pf-registration' %}">Регистрация</a></li>
    {% endif %}
{% endblock %}

{% block content %}
    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner pt-3" style="border-radius: 15px; height: 500px">
        <div class="carousel-item active">
            <img src="{% static 'img/carusel3.jpg' %}" class="d-block w-100" alt="..." style="border-radius: 15px">
        </div>
        <div class="carousel-item">
            <img src="{% static 'img/carusel1.jpg' %}" class="d-block w-100" alt="..." style="border-radius: 15px">
        </div>
        <div class="carousel-item">
            <img src="{% static 'img/carusel2.jpg' %}" class="d-block w-100" alt="..." style="border-radius: 15px">
        </div>
        </div>
    </div>
    <p class="zaglav" id="catalog" style="background-color: var(--color-gray);">- Каталог -</p>
    <div class="cards-container" id="cardsContainer">
        {% for fuel in fuels %}
        <a href="{% url 'fuel-detail' slug=fuel.slug %}">
            <div class="card-item">
                <div class="card-image-item">
                    <img src="{{ fuel.photo_url }}" alt="{{ fuel.name }}">
                </div>
                <div class="card-details">
                    <p class="card-price">{{ fuel.price|floatformat:0 }} ₽</p>
                    <p class="card-title">{{ fuel.name }}</p>
                    <button type="submit" class="btn-cart col-12">В корзину</button>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    
    <div class="container con-bg mt-3">
        <p class="zaglav" id="about" style="background-color: var(--color-gray);">- Отзывы -</p>
        <div class="row">
            {% for review in reviews %}
            <div class="col-md-4 review">
                <div class="card" style="background-color: var(--color-gray); border-radius: 10px;  border: none;">
                    <div class="card-body" style="background-color: var(--color-gray); border-radius: 10px; border: none;">
                        <p class="review-name text-center">{{ review.name }}</p>
                        <p class="text-center">{{ review.content }}</p>
                    </div>
                </div>
            </div>
            {% empty %}
            <p>Пока нет отзывов.</p>
            {% endfor %}
        </div>
        <p>
          <button class="btn btn-add-comment d-flex mx-auto" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
            Добавить комментарий
          </button>
        </p>
        <div class="collapse" id="collapseExample">
          <div class="card card-body" style="height: 300px; border-radius: 15px; background-color: var(--color-gray)">
            <form method="post">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="id_name" class="form-label">Имя</label>
                    <input type="text" class="form-control" id="id_name" name="name">
                </div>
                <div class="mb-3">
                    <label for="id_content" class="form-label">Отзыв</label>
                    <textarea class="form-control" id="id_content" name="content" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary d-flex mx-auto">Добавить отзыв</button>
            </form>
          </div>
        </div>
    </div>

    </div>
{% endblock %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.3/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>
